(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{120:function(e,t,a){},146:function(e,t,a){e.exports=a(209)},151:function(e,t,a){},152:function(e,t,a){},162:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),o=a.n(l),c=(a(151),a(97)),i=a(91),s=a(14),m=a(8),u=a(15),d=(a(37),a(71),a(60),a(152),a(273)),p=a(276),_=a(258),E=a(127),f=a.n(E),v=(a(72),["Anniversary","Friendship","Funny","Haikus","Hope","Life","Love","Sad"]),b="google-oauth2|102774395820207939159";function h(){return r.a.createElement("div",null,r.a.createElement(d.a,{className:"accordion"},r.a.createElement(p.a,{expandIcon:r.a.createElement(f.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement("p",{className:"header__dropdown-categories"},"Categories")),r.a.createElement("div",null,null===v||void 0===v?void 0:v.sort().map((function(e){return r.a.createElement(_.a,{key:e},r.a.createElement(m.b,{className:"header__dropdown-subcategories",to:"/".concat(e.toLowerCase())},e))}))),r.a.createElement(_.a,null,r.a.createElement(m.b,{className:"header__dropdown-subcategories",to:"/"},"All"))))}var g=a(259),N=a(262),k=a(266),O=a(265),j=a(261),y=a(263),C=a(264),S=a(213),I=(a(162),a(26)),L=a.n(I),P=a(16);function T(){return Object(P.useQuery)("poems",(function(){return L.a.get("/api/poems").then((function(e){return e.data}))}),{onError:function(e){console.error(e)}})}var w=function(e,t,a){var n=null===e||void 0===e?void 0:e.reduce((function(e,n){var r,l=((null===(r=e[n.userId])||void 0===r?void 0:r.points)||0)+t+a*n.likes.length;return e[n.userId]={author:n.author,picture:n.picture,points:l},e}),{});return n=function(e,t){var a=[];for(var n in e)if(e.hasOwnProperty(n)){var r={};r[n]=e[n],r.tempSortName=e[n][t],a.push(r)}a.sort((function(e,t){var a=e.tempSortName,n=t.tempSortName;return a>n?-1:a<n?1:0}));for(var l=[],o=0,c=a.length;o<c;o++){var i=a[o];for(var s in delete i.tempSortName,i)if(i.hasOwnProperty(s))var m=s;var u=i[m];l.push(u)}return l}(n,"points")},A=a(260),x=Object(g.a)((function(e){return{root:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}}));function D(){var e=x();return r.a.createElement("div",{className:e.root},r.a.createElement(A.a,{color:"secondary"}))}var B=Object(g.a)({table:{minWidth:50}});function R(){var e=B(),t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],o=a[1],c=T(),i=Object(n.useState)(w(null)),m=Object(s.a)(i,2),u=m[0],d=m[1];return Object(n.useEffect)((function(){c.data&&o(c.data)}),[JSON.stringify(c.data)]),Object(n.useEffect)((function(){l&&d(w(l,3,1))}),[JSON.stringify([l,3,1])]),c.isLoading?r.a.createElement(D,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"ranking"},r.a.createElement("h3",{className:"ranking__title"},"Poets ranking"),r.a.createElement("h5",{className:"ranking__subtitle"},"3 points per poem, 1 per like"),r.a.createElement(j.a,{className:"ranking__body",component:S.a},r.a.createElement(N.a,{className:e.table,"aria-label":"simple table"},r.a.createElement(y.a,null,r.a.createElement(C.a,null,r.a.createElement(O.a,{align:"center"},"Poets"),r.a.createElement(O.a,{align:"center"},"Points"))),r.a.createElement(k.a,null,Object.keys(u).map((function(e,t){return r.a.createElement(C.a,{key:t},r.a.createElement(O.a,{className:"ranking__picture-container",align:"center",component:"th",scope:"row"},r.a.createElement("div",{className:"ranking__picture-wrap"},r.a.createElement("img",{className:"ranking__picture",src:u[e].picture}),r.a.createElement("p",{className:"ranking__picture-description"},u[e].author))),r.a.createElement(O.a,{className:"ranking__number",align:"center"},u[e].points))})))))))}var Q=a(70);function F(){var e=Object(P.useQueryClient)();return Object(P.useMutation)((function(e){return L.a.delete("/api/poems/".concat(e)).then((function(e){return e.data}))}),{onSuccess:function(t,a){e.invalidateQueries("poems")},onError:function(e){console.error(e)}})}function M(){var e=Object(P.useQueryClient)();return Object(P.useMutation)((function(e){var t=e.poemId,a=e.userId;return L.a.put("/api/poems/".concat(t),{userId:a}).then((function(e){return e.data}))}),{onSuccess:function(t,a){e.invalidateQueries("poems")},onError:function(e){console.error(e)}})}var H=a(270),J=a(55),W=a.n(J),U=a(43),z=a.n(U),q=a(56),Y=a.n(q),K=a(44),G=a.n(K),V=a(19);var Z=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};var $=function(e,t){return"Title"===e&&t.sort((function(e,t){return e.title.toLowerCase()<t.title.toLowerCase()?-1:e.title.toLowerCase()>t.title.toLowerCase()?1:0})),"Likes"===e&&t.sort((function(e,t){return t.likes.length-e.likes.length})),"Random"===e&&t.sort((function(){return Math.random()-.5})),"Date"===e&&t.sort((function(e,t){return new Date(t.date)-new Date(e.date)})),t},X=a(90),ee={0:["\xb0","\u2080","\u06f0","\uff10"],1:["\xb9","\u2081","\u06f1","\uff11"],2:["\xb2","\u2082","\u06f2","\uff12"],3:["\xb3","\u2083","\u06f3","\uff13"],4:["\u2074","\u2084","\u06f4","\u0664","\uff14"],5:["\u2075","\u2085","\u06f5","\u0665","\uff15"],6:["\u2076","\u2086","\u06f6","\u0666","\uff16"],7:["\u2077","\u2087","\u06f7","\uff17"],8:["\u2078","\u2088","\u06f8","\uff18"],9:["\u2079","\u2089","\u06f9","\uff19"],a:["\xe0","\xe1","\u1ea3","\xe3","\u1ea1","\u0103","\u1eaf","\u1eb1","\u1eb3","\u1eb5","\u1eb7","\xe2","\u1ea5","\u1ea7","\u1ea9","\u1eab","\u1ead","\u0101","\u0105","\xe5","\u03b1","\u03ac","\u1f00","\u1f01","\u1f02","\u1f03","\u1f04","\u1f05","\u1f06","\u1f07","\u1f80","\u1f81","\u1f82","\u1f83","\u1f84","\u1f85","\u1f86","\u1f87","\u1f70","\u03ac","\u1fb0","\u1fb1","\u1fb2","\u1fb3","\u1fb4","\u1fb6","\u1fb7","\u0430","\u0623","\u1021","\u102c","\u102b","\u01fb","\u01ce","\xaa","\u10d0","\u0905","\u0627","\uff41","\xe4"],b:["\u0431","\u03b2","\u0628","\u1017","\u10d1","\uff42"],c:["\xe7","\u0107","\u010d","\u0109","\u010b","\uff43"],d:["\u010f","\xf0","\u0111","\u018c","\u0221","\u0256","\u0257","\u1d6d","\u1d81","\u1d91","\u0434","\u03b4","\u062f","\u0636","\u100d","\u1012","\u10d3","\uff44"],e:["\xe9","\xe8","\u1ebb","\u1ebd","\u1eb9","\xea","\u1ebf","\u1ec1","\u1ec3","\u1ec5","\u1ec7","\xeb","\u0113","\u0119","\u011b","\u0115","\u0117","\u03b5","\u03ad","\u1f10","\u1f11","\u1f12","\u1f13","\u1f14","\u1f15","\u1f72","\u03ad","\u0435","\u0451","\u044d","\u0454","\u0259","\u1027","\u1031","\u1032","\u10d4","\u090f","\u0625","\u0626","\uff45"],f:["\u0444","\u03c6","\u0641","\u0192","\u10e4","\uff46"],g:["\u011d","\u011f","\u0121","\u0123","\u0433","\u0491","\u03b3","\u1002","\u10d2","\u06af","\uff47"],h:["\u0125","\u0127","\u03b7","\u03ae","\u062d","\u0647","\u101f","\u103e","\u10f0","\uff48"],i:["\xed","\xec","\u1ec9","\u0129","\u1ecb","\xee","\xef","\u012b","\u012d","\u012f","\u0131","\u03b9","\u03af","\u03ca","\u0390","\u1f30","\u1f31","\u1f32","\u1f33","\u1f34","\u1f35","\u1f36","\u1f37","\u1f76","\u03af","\u1fd0","\u1fd1","\u1fd2","\u0390","\u1fd6","\u1fd7","\u0456","\u0457","\u0438","\u1023","\u102d","\u102e","\u100a\u103a","\u01d0","\u10d8","\u0907","\u06cc","\uff49"],j:["\u0135","\u0458","\u0408","\u10ef","\u062c","\uff4a"],k:["\u0137","\u0138","\u043a","\u03ba","\u0136","\u0642","\u0643","\u1000","\u10d9","\u10e5","\u06a9","\uff4b"],l:["\u0142","\u013e","\u013a","\u013c","\u0140","\u043b","\u03bb","\u0644","\u101c","\u10da","\uff4c"],m:["\u043c","\u03bc","\u0645","\u1019","\u10db","\uff4d"],n:["\xf1","\u0144","\u0148","\u0146","\u0149","\u014b","\u03bd","\u043d","\u0646","\u1014","\u10dc","\uff4e"],o:["\xf3","\xf2","\u1ecf","\xf5","\u1ecd","\xf4","\u1ed1","\u1ed3","\u1ed5","\u1ed7","\u1ed9","\u01a1","\u1edb","\u1edd","\u1edf","\u1ee1","\u1ee3","\xf8","\u014d","\u0151","\u014f","\u03bf","\u1f40","\u1f41","\u1f42","\u1f43","\u1f44","\u1f45","\u1f78","\u03cc","\u043e","\u0648","\u03b8","\u102d\u102f","\u01d2","\u01ff","\xba","\u10dd","\u0913","\uff4f","\xf6"],p:["\u043f","\u03c0","\u1015","\u10de","\u067e","\uff50"],q:["\u10e7","\uff51"],r:["\u0155","\u0159","\u0157","\u0440","\u03c1","\u0631","\u10e0","\uff52"],s:["\u015b","\u0161","\u015f","\u0441","\u03c3","\u0219","\u03c2","\u0633","\u0635","\u1005","\u017f","\u10e1","\uff53"],t:["\u0165","\u0163","\u0442","\u03c4","\u021b","\u062a","\u0637","\u100b","\u1010","\u0167","\u10d7","\u10e2","\uff54"],u:["\xfa","\xf9","\u1ee7","\u0169","\u1ee5","\u01b0","\u1ee9","\u1eeb","\u1eed","\u1eef","\u1ef1","\xfb","\u016b","\u016f","\u0171","\u016d","\u0173","\xb5","\u0443","\u1009","\u102f","\u1030","\u01d4","\u01d6","\u01d8","\u01da","\u01dc","\u10e3","\u0909","\uff55","\u045e","\xfc"],v:["\u0432","\u10d5","\u03d0","\uff56"],w:["\u0175","\u03c9","\u03ce","\u101d","\u103d","\uff57"],x:["\u03c7","\u03be","\uff58"],y:["\xfd","\u1ef3","\u1ef7","\u1ef9","\u1ef5","\xff","\u0177","\u0439","\u044b","\u03c5","\u03cb","\u03cd","\u03b0","\u064a","\u101a","\uff59"],z:["\u017a","\u017e","\u017c","\u0437","\u03b6","\u0632","\u1007","\u10d6","\uff5a"],aa:["\u0639","\u0906","\u0622"],ae:["\xe6","\u01fd"],ai:["\u0910"],ch:["\u0447","\u10e9","\u10ed","\u0686"],dj:["\u0452","\u0111"],dz:["\u045f","\u10eb"],ei:["\u090d"],gh:["\u063a","\u10e6"],ii:["\u0908"],ij:["\u0133"],kh:["\u0445","\u062e","\u10ee"],lj:["\u0459"],nj:["\u045a"],oe:["\xf6","\u0153","\u0624"],oi:["\u0911"],oii:["\u0912"],ps:["\u03c8"],sh:["\u0448","\u10e8","\u0634"],shch:["\u0449"],ss:["\xdf"],sx:["\u015d"],th:["\xfe","\u03d1","\u062b","\u0630","\u0638"],ts:["\u0446","\u10ea","\u10ec"],ue:["\xfc"],uu:["\u090a"],ya:["\u044f"],yu:["\u044e"],zh:["\u0436","\u10df","\u0698"],"(c)":["\xa9"],A:["\xc1","\xc0","\u1ea2","\xc3","\u1ea0","\u0102","\u1eae","\u1eb0","\u1eb2","\u1eb4","\u1eb6","\xc2","\u1ea4","\u1ea6","\u1ea8","\u1eaa","\u1eac","\xc5","\u0100","\u0104","\u0391","\u0386","\u1f08","\u1f09","\u1f0a","\u1f0b","\u1f0c","\u1f0d","\u1f0e","\u1f0f","\u1f88","\u1f89","\u1f8a","\u1f8b","\u1f8c","\u1f8d","\u1f8e","\u1f8f","\u1fb8","\u1fb9","\u1fba","\u0386","\u1fbc","\u0410","\u01fa","\u01cd","\uff21","\xc4"],B:["\u0411","\u0392","\u092c","\uff22"],C:["\xc7","\u0106","\u010c","\u0108","\u010a","\uff23"],D:["\u010e","\xd0","\u0110","\u0189","\u018a","\u018b","\u1d05","\u1d06","\u0414","\u0394","\uff24"],E:["\xc9","\xc8","\u1eba","\u1ebc","\u1eb8","\xca","\u1ebe","\u1ec0","\u1ec2","\u1ec4","\u1ec6","\xcb","\u0112","\u0118","\u011a","\u0114","\u0116","\u0395","\u0388","\u1f18","\u1f19","\u1f1a","\u1f1b","\u1f1c","\u1f1d","\u0388","\u1fc8","\u0415","\u0401","\u042d","\u0404","\u018f","\uff25"],F:["\u0424","\u03a6","\uff26"],G:["\u011e","\u0120","\u0122","\u0413","\u0490","\u0393","\uff27"],H:["\u0397","\u0389","\u0126","\uff28"],I:["\xcd","\xcc","\u1ec8","\u0128","\u1eca","\xce","\xcf","\u012a","\u012c","\u012e","\u0130","\u0399","\u038a","\u03aa","\u1f38","\u1f39","\u1f3b","\u1f3c","\u1f3d","\u1f3e","\u1f3f","\u1fd8","\u1fd9","\u1fda","\u038a","\u0418","\u0406","\u0407","\u01cf","\u03d2","\uff29"],J:["\uff2a"],K:["\u041a","\u039a","\uff2b"],L:["\u0139","\u0141","\u041b","\u039b","\u013b","\u013d","\u013f","\u0932","\uff2c"],M:["\u041c","\u039c","\uff2d"],N:["\u0143","\xd1","\u0147","\u0145","\u014a","\u041d","\u039d","\uff2e"],O:["\xd3","\xd2","\u1ece","\xd5","\u1ecc","\xd4","\u1ed0","\u1ed2","\u1ed4","\u1ed6","\u1ed8","\u01a0","\u1eda","\u1edc","\u1ede","\u1ee0","\u1ee2","\xd8","\u014c","\u0150","\u014e","\u039f","\u038c","\u1f48","\u1f49","\u1f4a","\u1f4b","\u1f4c","\u1f4d","\u1ff8","\u038c","\u041e","\u0398","\u04e8","\u01d1","\u01fe","\uff2f","\xd6"],P:["\u041f","\u03a0","\uff30"],Q:["\uff31"],R:["\u0158","\u0154","\u0420","\u03a1","\u0156","\uff32"],S:["\u015e","\u015c","\u0218","\u0160","\u015a","\u0421","\u03a3","\uff33"],T:["\u0164","\u0162","\u0166","\u021a","\u0422","\u03a4","\uff34"],U:["\xda","\xd9","\u1ee6","\u0168","\u1ee4","\u01af","\u1ee8","\u1eea","\u1eec","\u1eee","\u1ef0","\xdb","\u016a","\u016e","\u0170","\u016c","\u0172","\u0423","\u01d3","\u01d5","\u01d7","\u01d9","\u01db","\uff35","\u040e","\xdc"],V:["\u0412","\uff36"],W:["\u03a9","\u038f","\u0174","\uff37"],X:["\u03a7","\u039e","\uff38"],Y:["\xdd","\u1ef2","\u1ef6","\u1ef8","\u1ef4","\u0178","\u1fe8","\u1fe9","\u1fea","\u038e","\u042b","\u0419","\u03a5","\u03ab","\u0176","\uff39"],Z:["\u0179","\u017d","\u017b","\u0417","\u0396","\uff3a"],AE:["\xc6","\u01fc"],Ch:["\u0427"],Dj:["\u0402"],Dz:["\u040f"],Gx:["\u011c"],Hx:["\u0124"],Ij:["\u0132"],Jx:["\u0134"],Kh:["\u0425"],Lj:["\u0409"],Nj:["\u040a"],Oe:["\u0152"],Ps:["\u03a8"],Sh:["\u0428"],Shch:["\u0429"],Ss:["\u1e9e"],Th:["\xde"],Ts:["\u0426"],Ya:["\u042f"],Yu:["\u042e"],Zh:["\u0416"],"-":[" "]},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=String(e);return t=(t=t.replace(/^\s+|\s+$/g,"")).toLowerCase(),Object.keys(ee).forEach((function(e){ee[e].forEach((function(a){t=t.replace(new RegExp(a,"g"),e)}))})),t};var ae=function(e){var t=Object(V.b)(),a=t.user,l=t.isAuthenticated,o=t.isLoading,c=e.match.params.genre,i=Object(n.useState)([]),d=Object(s.a)(i,2),p=d[0],_=d[1],E=Object(n.useState)(""),f=Object(s.a)(E,2),v=f[0],b=f[1],h=Object(n.useContext)(Se),g=T();Object(n.useEffect)((function(){if(g.data){var e=Object(Q.a)(g.data);if(c){var t=e.filter((function(e){return e.genre===c})),a=$(h.sortPoemsBy,t);_(a)}else{var n=$(h.sortPoemsBy,e);_(n)}}}),[JSON.stringify([g.data,c,h.sortPoemsBy])]);var N=F(),k=M(),O=function(e,t,a){e.preventDefault(),k.mutate({poemId:t,userId:a})},j=Object(u.f)();return o||g.isLoading?r.a.createElement(D,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,null,r.a.createElement("title",null,c?"".concat(Z(c)," poems"):"Poemunity")),r.a.createElement("div",{className:"list__container"},r.a.createElement("div",{className:"list__intro"},c&&r.a.createElement("p",{className:"list__presentation"},"Category: ",c.toUpperCase()),r.a.createElement("div",{className:"list__search"},r.a.createElement("div",{className:"separator"}),r.a.createElement(W.a,{style:{fontSize:40,fill:"#4F5D73"}}),r.a.createElement(H.a,{label:"Search an author",InputLabelProps:{style:{color:"#4F5D73"}},InputProps:{style:{color:"#4F5D73"}},onChange:function(e){b(te(e.target.value))}})),r.a.createElement("form",{className:"list__sort"},r.a.createElement("label",null,"Order poems by: ",r.a.createElement("select",{type:"submit",id:"sort",name:"sort",onChange:function(e){h.setState({sortPoemsBy:e.target.value})}},r.a.createElement("option",{value:"Likes",selected:"Likes"===h.sortPoemsBy},"Likes"),r.a.createElement("option",{value:"Date",selected:"Date"===h.sortPoemsBy},"Date"),r.a.createElement("option",{value:"Random",selected:"Random"===h.sortPoemsBy},"Random"),r.a.createElement("option",{value:"Title",selected:"Title"===h.sortPoemsBy},"Title"))))),null===p||void 0===p?void 0:p.map((function(e){return r.a.createElement("main",{key:e._id,className:"poem__detail"},te(e.author).includes(v)&&r.a.createElement("section",{className:"poem__block"},r.a.createElement("section",null,r.a.createElement(m.b,{to:"/detail/".concat(e._id),className:"poem__title"},e.title),r.a.createElement("div",{className:"poem__author-container"},r.a.createElement("img",{className:"poem__picture",src:e.picture}),r.a.createElement("p",{className:"poem__author"},e.author)),r.a.createElement("div",{className:"poem__date"},e.date)),r.a.createElement("section",null,r.a.createElement("div",{className:"poem__content poems__content"},e.poem),r.a.createElement("div",{className:"poems__read-more"},r.a.createElement(m.b,{to:"/detail/".concat(e._id),className:"poems__read-more"},"Read more"))),r.a.createElement("section",{className:"poem__footer"},1===e.likes.length&&r.a.createElement("div",{className:"poem__likes"},e.likes.length," ","Like"),1!==e.likes.length&&r.a.createElement("div",{className:"poem__likes"},e.likes.length," ","Likes"),r.a.createElement("div",{className:"separator"}),l&&e.author!==a.name&&e.likes.some((function(e){return e===a.sub}))&&r.a.createElement(m.b,{className:"poem__likes-icon",onClick:function(t){return O(t,e._id,a.sub)}}),l&&e.author!==a.name&&!e.likes.some((function(e){return e===a.sub}))&&r.a.createElement(m.b,{className:"poem__unlikes-icon",onClick:function(t){return O(t,e._id,a.sub)}}),l&&(e.author===a.name||"6172f315eb48b69ac1f015dc"===a.sub)&&r.a.createElement(Y.a,{className:"poem__edit-icon",onClick:function(t){return a=e._id,j.push("/profile"),void h.setState({elementToEdit:a});var a}}),l&&(e.author===a.name||"6172f315eb48b69ac1f015dc"===a.sub)&&r.a.createElement(z.a,{className:"poem__delete-icon",style:{fill:"red"},onClick:function(t){return N.mutate(e._id)}}),r.a.createElement(m.b,{to:"/detail/".concat(e._id),className:"poem__comments-icon"},r.a.createElement(G.a,{style:{fill:"#000"}})))))}))))};var ne=function(e){return r.a.createElement("main",{className:"dashboard"},r.a.createElement("div",{className:"dashboard__accordion"},r.a.createElement(h,null)),r.a.createElement("div",{className:"dashboard__list"},r.a.createElement(ae,e)),r.a.createElement("div",{className:"dashboard__ranking"},r.a.createElement(R,null)))},re=a(130),le=a.n(re);a(120);function oe(e){var t=Object(P.useQueryClient)();return Object(P.useQuery)(["poems",e],(function(){return L.a.get("/api/poems/".concat(e)).then((function(e){return e.data}))}),{initialData:function(){var a;return null===(a=t.getQueryData("poems"))||void 0===a?void 0:a.find((function(t){return t.id===e}))},initialStale:!0,onError:function(e){console.error(e)}})}var ce=function(e){var t=Object(V.b)(),a=t.user,l=t.isAuthenticated,o=t.isLoading,c=Object(n.useState)([]),i=Object(s.a)(c,2),d=i[0],p=i[1],_=Object(n.useContext)(Se),E=oe(e.match.params.poemId);Object(n.useEffect)((function(){E.data&&p(E.data)}),[JSON.stringify(E.data)]);var f=F(),v=M();function b(e,t,a){e.preventDefault(),v.mutate({poemId:t,userId:a})}var h=Object(u.f)();if(o||E.isLoading)return r.a.createElement(D,null);var g={url:"http://localhost:3000/detail/".concat(e.match.params.poemId),identifier:"http://localhost:3000/detail/".concat(e.match.params.poemId),title:"Title of Your Article"};return r.a.createElement(r.a.Fragment,null,!d&&r.a.createElement("main",{className:"page-not-found__container"},r.a.createElement("section",{className:"page-not-found__message"},r.a.createElement("h1",{className:"page-not-found__title"},"Error - 404"),r.a.createElement("p",{className:"page-not-found__text"},"Nothing to see here"),r.a.createElement(m.b,{className:"page-not-found__link",to:"/"},"Back to Dashboard"))),d&&d.likes&&r.a.createElement("main",{className:"poem__detail"},r.a.createElement(X.a,null,r.a.createElement("title",null,"Poem: ".concat(d.title))),r.a.createElement("section",{className:"poem__block"},r.a.createElement("section",null,r.a.createElement("h2",{className:"poem__title"},d.title),r.a.createElement("div",{className:"poem__author-container"},r.a.createElement("img",{className:"poem__picture",src:d.picture}),r.a.createElement("p",{className:"poem__author"},d.author)),r.a.createElement("div",{className:"poem__date"},d.date)),r.a.createElement("section",null,r.a.createElement("div",{className:"poem__content"},d.poem)),r.a.createElement("br",null),r.a.createElement("section",{className:"poem__footer"},1===d.likes.length&&r.a.createElement("div",{className:"poem__likes"},d.likes.length," ","Like"),1!==d.likes.length&&r.a.createElement("div",{className:"poem__likes"},d.likes.length," ","Likes"),r.a.createElement("div",{className:"separator"}),l&&d.author!==a.name&&d.likes.some((function(e){return e===a.sub}))&&r.a.createElement(m.b,{className:"poem__likes-icon",onClick:function(e){return b(e,d._id,a.sub)}}),l&&d.author!==a.name&&!d.likes.some((function(e){return e===a.sub}))&&r.a.createElement(m.b,{className:"poem__unlikes-icon",onClick:function(e){return b(e,d._id,a.sub)}}),l&&(d.author===a.name||"6172f315eb48b69ac1f015dc"===a.sub)&&r.a.createElement(Y.a,{className:"poem__edit-icon",onClick:function(e){return t=d._id,h.push("/profile"),void _.setState({elementToEdit:t});var t}}),l&&(d.author===a.name||"6172f315eb48b69ac1f015dc"===a.sub)&&r.a.createElement(z.a,{className:"poem__delete-icon",style:{fill:"red"},onClick:function(e){return f.mutate(d._id)}}),r.a.createElement(m.b,{to:"/detail/".concat(d._id),className:"poem__comments-icon"},r.a.createElement(G.a,{style:{fill:"#000"}})))),r.a.createElement("div",{className:"article-container"},r.a.createElement(le.a.DiscussionEmbed,{shortname:"poemunity",config:g}))))},ie=function(){var e=Object(V.b)().loginWithRedirect;return r.a.createElement("button",{className:"header__login",onClick:function(){return e()}})},se=function(){var e=Object(V.b)().logout;return r.a.createElement("button",{className:"header__logout",onClick:function(){return e({returnTo:window.location.origin})}})};var me=function(){var e=Object(V.b)(),t=e.isAuthenticated;return e.isLoading?r.a.createElement(D,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"header"},r.a.createElement("div",{className:"header__dropdown"},r.a.createElement(h,null)),r.a.createElement("div",{className:"header__logo"},r.a.createElement(m.b,{to:"/",className:"header__text-logo-first"},"P"),r.a.createElement(m.b,{to:"/",className:"header__logo-icon"}),r.a.createElement(m.b,{to:"/",className:"header__text-logo-second"},"emunity")),r.a.createElement("p",{className:"list__presentation"},"Your poem community!"),r.a.createElement("div",{className:"separator"}),t?r.a.createElement(m.b,{to:"/profile",className:"header__profile"}):r.a.createElement(r.a.Fragment,null),t?r.a.createElement(se,null):r.a.createElement(ie,null)))},ue=a(131),de=a.n(ue),pe=a(30),_e=a(268),Ee=a(272),fe=a(269),ve=a(267),be=a(271),he=(a(208),function(e,t){return e.filter((function(e){return e.author===t.name}))});var ge=function(e){var t=Object(V.b)(),a=t.user,l=t.isAuthenticated,o=t.isLoading,c=Object(n.useState)([]),i=Object(s.a)(c,2),u=i[0],d=i[1],p=Object(n.useState)(""),_=Object(s.a)(p,2),E=_[0],f=_[1],v=Object(n.useContext)(Se),b=T();Object(n.useEffect)((function(){if(b.data){var e=he(b.data,a);d(e)}}),[JSON.stringify([b.data,a])]);var h=F();return o?r.a.createElement(D,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search__container"},r.a.createElement("div",{className:"separator"}),r.a.createElement("div",{className:"list__intro"},r.a.createElement(W.a,{style:{fontSize:40,fill:"#551A8B"}}),r.a.createElement(H.a,{label:"Buscar autor",InputLabelProps:{style:{color:"#551A8B"}},InputProps:{style:{color:"#551A8B"}},onChange:function(e){f(e.target.value)}}))),u.map((function(e){return r.a.createElement("main",{key:e._id,className:"poem__detail"},e.author.includes(E)&&r.a.createElement("section",{className:"poem__block"},r.a.createElement("section",null,r.a.createElement(m.b,{to:"/detail/".concat(e._id),className:"poem__title"},e.title),r.a.createElement("p",{className:"poem__author"},e.author),r.a.createElement("div",{className:"poem__date"},e.date)),r.a.createElement("section",null,r.a.createElement("div",{className:"poem__content poems__content"},e.poem),r.a.createElement("div",{className:"poems__read-more"},r.a.createElement(m.b,{to:"/detail/".concat(e._id),className:"poems__read-more"},"Leer m\xe1s"))),r.a.createElement("section",{className:"poem__footer"},1===e.likes.length&&r.a.createElement("div",{className:"poem__likes"},e.likes.length," ","Like"),1!==e.likes.length&&r.a.createElement("div",{className:"poem__likes"},e.likes.length," ","Likes"),r.a.createElement("div",{className:"separator"}),l&&(e.author===a.name||"6172f315eb48b69ac1f015dc"===a.sub)&&r.a.createElement(Y.a,{className:"poem__edit-icon",onClick:function(t){return a=e._id,void v.setState({elementToEdit:a});var a}}),l&&e.author===a.name&&r.a.createElement(z.a,{className:"poem__delete-icon",style:{fill:"red"},onClick:function(t){return h.mutate(e._id)}}),r.a.createElement(m.b,{to:"/detail/".concat(e._id),className:"poem__comments-icon"},r.a.createElement(G.a,{style:{fill:"#000"}})))))})))},Ne=function(e,t){return e.filter((function(e){return e.likes.some((function(e){return e===t.sub}))}))};var ke=function(e){var t=Object(V.b)(),a=t.user,l=t.isAuthenticated,o=t.isLoading,c=Object(n.useState)([]),i=Object(s.a)(c,2),u=i[0],d=i[1],p=Object(n.useState)(""),_=Object(s.a)(p,2),E=_[0],f=_[1],v=T();Object(n.useEffect)((function(){if(v.data){var e=Ne(v.data,a);d(e)}}),[JSON.stringify([v.data,a])]);var b=F(),h=M();function g(e,t,a){e.preventDefault(),h.mutate({poemId:t,userId:a})}return o?r.a.createElement(D,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search__container"},r.a.createElement("div",{className:"separator"}),r.a.createElement("div",{className:"list__intro"},r.a.createElement(W.a,{style:{fontSize:40,fill:"#551A8B"}}),r.a.createElement(H.a,{label:"Buscar autor",InputLabelProps:{style:{color:"#551A8B"}},InputProps:{style:{color:"#551A8B"}},onChange:function(e){f(e.target.value)}}))),u.map((function(e){return r.a.createElement("main",{key:e._id,className:"poem__detail"},e.author.includes(E)&&r.a.createElement("section",{className:"poem__block"},r.a.createElement("section",null,r.a.createElement(m.b,{to:"/detail/".concat(e._id),className:"poem__title"},e.title),r.a.createElement("div",{className:"poem__author-container"},r.a.createElement("img",{className:"poem__picture",src:e.picture}),r.a.createElement("p",{className:"poem__author"},e.author)),r.a.createElement("div",{className:"poem__date"},e.date)),r.a.createElement("section",null,r.a.createElement("div",{className:"poem__content poems__content"},e.poem),r.a.createElement("div",{className:"poems__read-more"},r.a.createElement(m.b,{to:"/detail/".concat(e._id),className:"poems__read-more"},"Leer m\xe1s"))),r.a.createElement("section",{className:"poem__footer"},1===e.likes.length&&r.a.createElement("div",{className:"poem__likes"},e.likes.length," ","Like"),1!==e.likes.length&&r.a.createElement("div",{className:"poem__likes"},e.likes.length," ","Likes"),r.a.createElement("div",{className:"separator"}),l&&e.author!==a.name&&e.likes.some((function(e){return e===a.sub}))&&r.a.createElement(m.b,{className:"poem__likes-icon",onClick:function(t){return g(t,e._id,a.sub)}}),l&&e.author!==a.name&&!e.likes.some((function(e){return e===a.sub}))&&r.a.createElement(m.b,{className:"poem__unlikes-icon",onClick:function(t){return g(t,e._id,a.sub)}}),l&&e.author===a.name&&r.a.createElement(z.a,{className:"poem__delete-icon",style:{fill:"red"},onClick:function(t){return b.mutate(e._id)}}),r.a.createElement(m.b,{to:"/detail/".concat(e._id),className:"poem__comments-icon"},r.a.createElement(G.a,{style:{fill:"#000"}})))))})))};function Oe(e){var t=e.children,a=e.value,n=e.index,l=Object(i.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n)},l),a===n&&r.a.createElement(be.a,{p:3},r.a.createElement(ve.a,null,t)))}function je(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}Object(g.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,width:500}}}));function ye(e){var t,a=Object(pe.a)(),l=r.a.useState(0),o=Object(s.a)(l,2),c=o[0],i=o[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),d=u[0],p=u[1],_=Object(n.useState)(""),E=Object(s.a)(_,2),f=E[0],h=E[1],g=Object(n.useState)(""),N=Object(s.a)(g,2),k=N[0],O=N[1],j=Object(n.useState)(""),y=Object(s.a)(j,2),C=y[0],S=y[1],I=Object(n.useState)([]),T=Object(s.a)(I,2),w=T[0],A=T[1],x=Object(V.b)(),D=x.user,B=x.isAuthenticated,R=(x.isLoading,function(){var e=Object(P.useQueryClient)();return Object(P.useMutation)((function(e){return L.a.post("/api/poems",e).then((function(e){return e.data}))}),{onSuccess:function(){e.invalidateQueries("poems")},onError:function(e){console.error(e)}})}()),F=function(){var e=Object(P.useQueryClient)();return Object(P.useMutation)((function(e){var t=e.poem,a=e.poemId;return L.a.patch("/api/poems/".concat(a),t).then((function(e){return e.data}))}),{onSuccess:function(){e.invalidateQueries("poems")},onError:function(e){console.error(e)}})}(),M=Object(n.useContext)(Se),H=oe(M.elementToEdit);Object(n.useEffect)((function(){var e,t,a,n,r,l;O(M.elementToEdit?null===H||void 0===H||null===(e=H.data)||void 0===e?void 0:e.title:""),p(M.elementToEdit?null===H||void 0===H||null===(t=H.data)||void 0===t?void 0:t.poem:""),h(M.elementToEdit?null===H||void 0===H||null===(a=H.data)||void 0===a?void 0:a.userId:""),A(M.elementToEdit?null===H||void 0===H||null===(n=H.data)||void 0===n||null===(r=n.likes)||void 0===r?void 0:r.toString():[]),S(M.elementToEdit?null===H||void 0===H||null===(l=H.data)||void 0===l?void 0:l.genre:"")}),[JSON.stringify([M.elementToEdit,null===(t=H.data)||void 0===t?void 0:t.title])]);function J(e,t){t(e)}var W=[{id:1,name:"Catherine Cawley",picture:"https://cdn.getyourguide.com/img/location/5c88db055a755.jpeg/88.jpg"},{id:2,name:"Stacey Cosgrove",picture:"https://media-cdn.tripadvisor.com/media/photo-s/05/62/06/0e/restaurant-els-valencians.jpg"},{id:3,name:"Sarah Griffin",picture:"https://cdn.pixabay.com/photo/2017/11/09/17/11/sea-2934076_960_720.jpg"},{id:4,name:"Ray Higgins",picture:"https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/old-books-arranged-on-shelf-royalty-free-image-1572384534.jpg"}].find((function(e){return e.id===parseInt(f)}));return B&&r.a.createElement("main",{className:"profile__main"},r.a.createElement("section",{className:"profile__title"},r.a.createElement("div",null,D.name,"'s Profile")),r.a.createElement("section",{className:"profile__intro"},r.a.createElement("img",{className:"profile__image",src:D.picture,alt:D.name}),r.a.createElement("div",{className:"profile__personal-data"},r.a.createElement("div",{className:"profile__insert-poem"},r.a.createElement("p",{className:"profile__insert-poem-title"},"Insert a poem:"),r.a.createElement("br",null),r.a.createElement("form",{className:"profile__insert-poem-form"},r.a.createElement("div",{className:"profile__insert-poem-inputs"},D.sub===b&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"profile__insert-poem-input"},"Author's Id: ",r.a.createElement("input",{className:"profile__insert-poem-input",name:"author",required:!0,value:f,onChange:function(e){return J(e.target.value,h)}})),r.a.createElement("label",{className:"profile__insert-poem-input"},"Likes",r.a.createElement("input",{className:"profile__insert-poem-input",name:"likes",value:w,onChange:function(e){return J(e.target.value,A)}}))),r.a.createElement("label",{className:"profile__insert-poem-input"},"Title: ",r.a.createElement("input",{className:"profile__insert-poem-input",placeholder:"Title",name:"title",required:!0,value:k,onChange:function(e){return J(e.target.value,O)}})),r.a.createElement("label",{className:"profile__insert-poem-input"},"Category: ",r.a.createElement("select",{className:"profile__insert-poem-input",id:"category",name:"category",required:!0,onChange:function(e){J(e.target.value,S)}},r.a.createElement("option",{value:""},"Select"),null===v||void 0===v?void 0:v.map((function(e){var t;return r.a.createElement("option",{value:e.toLowerCase(),selected:(null===H||void 0===H||null===(t=H.data)||void 0===t?void 0:t.genre)===e.toLowerCase()},e)}))))),r.a.createElement("div",null,r.a.createElement("textarea",{className:"profile__text-area",id:"poem",name:"poem",required:!0,placeholder:"Insert your poem here",value:d,onChange:function(e){return J(e.target.value,p)}})),r.a.createElement("button",{className:"profile__send-poem",type:"submit",onClick:function(e){M.setState({elementToEdit:""})}},"Reset"),r.a.createElement("button",{className:"profile__send-poem",type:"submit",onClick:function(e){e.preventDefault();var t=new Date,a=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();M.elementToEdit?((null===D||void 0===D?void 0:D.sub)===b?F.mutate({poem:{userId:f,author:(null===W||void 0===W?void 0:W.name)||"",picture:(null===W||void 0===W?void 0:W.picture)||"",poem:d,title:k,genre:C,likes:0!==w.length?Object(Q.a)(null===w||void 0===w?void 0:w.split(",")):[],date:a},poemId:H.data._id}):F.mutate({poem:{userId:D.sub,author:D.name,picture:D.picture,poem:d,title:k,genre:C,likes:[],date:a},poemId:H.data._id}),M.setState({elementToEdit:""})):((null===D||void 0===D?void 0:D.sub)===b?R.mutate({userId:f,author:(null===W||void 0===W?void 0:W.name)||"",picture:(null===W||void 0===W?void 0:W.picture)||"",poem:d,title:k,genre:C,likes:0!==w.length?Object(Q.a)(null===w||void 0===w?void 0:w.split(",")):[],date:a}):R.mutate({userId:D.sub,author:D.name,picture:D.picture,poem:d,title:k,genre:C,likes:[],date:a}),p(""),O(""),S(""))}},"Send"))))),r.a.createElement("section",{className:"profile__outro"},r.a.createElement("div",{className:"profile__tabs"},r.a.createElement(_e.a,{position:"static",color:"default"},r.a.createElement(Ee.a,{value:c,onChange:function(e,t){i(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"full width tabs example"},r.a.createElement(fe.a,Object.assign({label:"My poems"},je(0))),r.a.createElement(fe.a,Object.assign({label:"My favourite poems"},je(1))))),r.a.createElement(de.a,{axis:"rtl"===a.direction?"x-reverse":"x",index:c,onChangeIndex:function(e){i(e)}},r.a.createElement(Oe,{className:"profile__myPoems",value:c,index:0,dir:a.direction},r.a.createElement(ge,null)),r.a.createElement(Oe,{className:"profile__myPoems",value:c,index:1,dir:a.direction},r.a.createElement(ke,null))))))}var Ce=function(e){return r.a.createElement("main",{className:"page-not-found__container"},r.a.createElement("section",{className:"page-not-found__message"},r.a.createElement("h1",{className:"page-not-found__title"},"Error - 404"),r.a.createElement("p",{className:"page-not-found__text"},"Nothing to see here"),r.a.createElement(m.b,{className:"page-not-found__link",to:"/"},"Back to Dashboard")))},Se=r.a.createContext();var Ie=function(e){var t=Object(n.useState)({sortPoemsBy:"Likes",elementToEdit:"",setState:function(e){e.setState;var t=Object(i.a)(e,["setState"]),a=Object(c.a)(Object(c.a)({},l),t);o(a)}}),a=Object(s.a)(t,2),l=a[0],o=a[1];return r.a.createElement(Se.Provider,{value:l},r.a.createElement(m.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(me,null),r.a.createElement("div",{className:"margin-body"},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",exact:!0,component:ne}),r.a.createElement(u.a,{path:"/profile",component:ye}),r.a.createElement(u.a,{path:"/:genre",exact:!0,component:ne}),r.a.createElement(u.a,{path:"/detail/:poemId",exact:!0,component:ce}),r.a.createElement(u.a,{component:Ce}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Le=a(132),Pe="http://localhost:3000/profile";Pe="https://poemunity.com/profile";var Te=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_AUTH0_DOMAIN:"dev-kpid04y3.eu.auth0.com",REACT_APP_AUTH0_CLIENTID:"A9LJVea7ss5WV8pjbW1505492DGyqosI",REACT_APP_ADMIN:"6172f315eb48b69ac1f015dc"}),we=Te.REACT_APP_AUTH0_DOMAIN,Ae=Te.REACT_APP_AUTH0_CLIENTID,xe=new P.QueryClient;o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P.QueryClientProvider,{client:xe},r.a.createElement(V.a,{domain:we,clientId:Ae,redirectUri:Pe},r.a.createElement(Ie,null)),r.a.createElement(Le.ReactQueryDevtools,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,t,a){},60:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){}},[[146,1,2]]]);
//# sourceMappingURL=main.de9f918f.chunk.js.map