(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{118:function(e,t,a){},144:function(e,t,a){e.exports=a(204)},149:function(e,t,a){},150:function(e,t,a){},160:function(e,t,a){},201:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),o=a.n(l),c=(a(149),a(57)),i=a(90),s=a(10),m=a(7),u=a(13),d=(a(36),a(70),a(59),a(150),a(268)),p=a(271),f=a(253),E=a(125),_=a.n(E),v=(a(71),["Anniversary","Friendship","Funny","Haikus","Hope","Life","Love","Sad"]);function h(){return r.a.createElement("div",null,r.a.createElement(d.a,{className:"accordion"},r.a.createElement(p.a,{expandIcon:r.a.createElement(_.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement("p",{className:"header__dropdown-categories"},"Categories")),r.a.createElement("div",null,null===v||void 0===v?void 0:v.sort().map((function(e){return r.a.createElement(f.a,{key:e},r.a.createElement(m.b,{className:"header__dropdown-subcategories",to:"/".concat(e.toLowerCase())},e))}))),r.a.createElement(f.a,null,r.a.createElement(m.b,{className:"header__dropdown-subcategories",to:"/"},"All"))))}var g=a(254),b=a(257),N=a(261),O=a(260),k=a(256),j=a(258),y=a(259),S=a(208),C=(a(160),a(19)),w=a.n(C),I=a(14);function L(){return Object(I.useQuery)("poems",(function(){return w.a.get("/api/poems").then((function(e){return e.data}))}),{onError:function(e){console.error(e)}})}var x=function(e,t,a){var n=null===e||void 0===e?void 0:e.reduce((function(e,n){var r,l=((null===(r=e[n.userId])||void 0===r?void 0:r.points)||0)+t+a*n.likes.length;return e[n.userId]={author:n.author,picture:n.picture,points:l},e}),{});return n=function(e,t){var a=[];for(var n in e)if(e.hasOwnProperty(n)){var r={};r[n]=e[n],r.tempSortName=e[n][t],a.push(r)}a.sort((function(e,t){var a=e.tempSortName,n=t.tempSortName;return a>n?-1:a<n?1:0}));for(var l=[],o=0,c=a.length;o<c;o++){var i=a[o];for(var s in delete i.tempSortName,i)if(i.hasOwnProperty(s))var m=s;var u=i[m];l.push(u)}return l}(n,"points")},P=a(255),T=Object(g.a)((function(e){return{root:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}}));function D(){var e=T();return r.a.createElement("div",{className:e.root},r.a.createElement(P.a,{color:"secondary"}))}var A=Object(g.a)({table:{minWidth:50}});function B(){var e=A(),t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],o=a[1],c=L(),i=Object(n.useState)(x(null)),m=Object(s.a)(i,2),u=m[0],d=m[1];return Object(n.useEffect)((function(){c.data&&o(c.data)}),[JSON.stringify(c.data)]),Object(n.useEffect)((function(){l&&d(x(l,3,1))}),[JSON.stringify([l,3,1])]),c.isLoading?r.a.createElement(D,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"ranking"},r.a.createElement("h3",{className:"ranking__title"},"Poets ranking"),r.a.createElement("h5",{className:"ranking__subtitle"},"3 points per poem, 1 per like"),r.a.createElement(k.a,{className:"ranking__body",component:S.a},r.a.createElement(b.a,{className:e.table,"aria-label":"simple table"},r.a.createElement(j.a,null,r.a.createElement(y.a,null,r.a.createElement(O.a,{align:"center"},"Poets"),r.a.createElement(O.a,{align:"center"},"Points"))),r.a.createElement(N.a,null,Object.keys(u).map((function(e,t){return r.a.createElement(y.a,{key:t},r.a.createElement(O.a,{className:"ranking__picture-container",align:"center",component:"th",scope:"row"},r.a.createElement("div",{className:"ranking__picture-wrap"},r.a.createElement("img",{className:"ranking__picture",src:u[e].picture}),r.a.createElement("p",{className:"ranking__picture-description"},u[e].author))),r.a.createElement(O.a,{className:"ranking__number",align:"center"},u[e].points))})))))))}var J=a(69);function R(){var e=Object(I.useQueryClient)(),t=Object(n.useContext)(Pe);return Object(I.useMutation)((function(e){return w.a.delete("/api/poems/".concat(e),t.config).then((function(e){return e.data}))}),{onSuccess:function(t,a){e.invalidateQueries("poems")},onError:function(e){console.error(e)}})}function U(){var e=Object(I.useQueryClient)(),t=Object(n.useContext)(Pe);return Object(I.useMutation)((function(e){return w.a.put("/api/poems/".concat(e),null,t.config).then((function(e){return e.data}))}),{onSuccess:function(t,a){e.invalidateQueries("poems")},onError:function(e){console.error(e)}})}var Q=a(265),M=a(53),F=a.n(M),H=a(42),W=a.n(H),z=a(54),q=a.n(z),Y=a(43),K=a.n(Y);var V=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};var G=function(e,t){return"Title"===e&&t.sort((function(e,t){return e.title.toLowerCase()<t.title.toLowerCase()?-1:e.title.toLowerCase()>t.title.toLowerCase()?1:0})),"Likes"===e&&t.sort((function(e,t){return t.likes.length-e.likes.length})),"Random"===e&&t.sort((function(){return Math.random()-.5})),"Date"===e&&t.sort((function(e,t){return new Date(t.date)-new Date(e.date)})),t},Z=a(89),$={0:["\xb0","\u2080","\u06f0","\uff10"],1:["\xb9","\u2081","\u06f1","\uff11"],2:["\xb2","\u2082","\u06f2","\uff12"],3:["\xb3","\u2083","\u06f3","\uff13"],4:["\u2074","\u2084","\u06f4","\u0664","\uff14"],5:["\u2075","\u2085","\u06f5","\u0665","\uff15"],6:["\u2076","\u2086","\u06f6","\u0666","\uff16"],7:["\u2077","\u2087","\u06f7","\uff17"],8:["\u2078","\u2088","\u06f8","\uff18"],9:["\u2079","\u2089","\u06f9","\uff19"],a:["\xe0","\xe1","\u1ea3","\xe3","\u1ea1","\u0103","\u1eaf","\u1eb1","\u1eb3","\u1eb5","\u1eb7","\xe2","\u1ea5","\u1ea7","\u1ea9","\u1eab","\u1ead","\u0101","\u0105","\xe5","\u03b1","\u03ac","\u1f00","\u1f01","\u1f02","\u1f03","\u1f04","\u1f05","\u1f06","\u1f07","\u1f80","\u1f81","\u1f82","\u1f83","\u1f84","\u1f85","\u1f86","\u1f87","\u1f70","\u03ac","\u1fb0","\u1fb1","\u1fb2","\u1fb3","\u1fb4","\u1fb6","\u1fb7","\u0430","\u0623","\u1021","\u102c","\u102b","\u01fb","\u01ce","\xaa","\u10d0","\u0905","\u0627","\uff41","\xe4"],b:["\u0431","\u03b2","\u0628","\u1017","\u10d1","\uff42"],c:["\xe7","\u0107","\u010d","\u0109","\u010b","\uff43"],d:["\u010f","\xf0","\u0111","\u018c","\u0221","\u0256","\u0257","\u1d6d","\u1d81","\u1d91","\u0434","\u03b4","\u062f","\u0636","\u100d","\u1012","\u10d3","\uff44"],e:["\xe9","\xe8","\u1ebb","\u1ebd","\u1eb9","\xea","\u1ebf","\u1ec1","\u1ec3","\u1ec5","\u1ec7","\xeb","\u0113","\u0119","\u011b","\u0115","\u0117","\u03b5","\u03ad","\u1f10","\u1f11","\u1f12","\u1f13","\u1f14","\u1f15","\u1f72","\u03ad","\u0435","\u0451","\u044d","\u0454","\u0259","\u1027","\u1031","\u1032","\u10d4","\u090f","\u0625","\u0626","\uff45"],f:["\u0444","\u03c6","\u0641","\u0192","\u10e4","\uff46"],g:["\u011d","\u011f","\u0121","\u0123","\u0433","\u0491","\u03b3","\u1002","\u10d2","\u06af","\uff47"],h:["\u0125","\u0127","\u03b7","\u03ae","\u062d","\u0647","\u101f","\u103e","\u10f0","\uff48"],i:["\xed","\xec","\u1ec9","\u0129","\u1ecb","\xee","\xef","\u012b","\u012d","\u012f","\u0131","\u03b9","\u03af","\u03ca","\u0390","\u1f30","\u1f31","\u1f32","\u1f33","\u1f34","\u1f35","\u1f36","\u1f37","\u1f76","\u03af","\u1fd0","\u1fd1","\u1fd2","\u0390","\u1fd6","\u1fd7","\u0456","\u0457","\u0438","\u1023","\u102d","\u102e","\u100a\u103a","\u01d0","\u10d8","\u0907","\u06cc","\uff49"],j:["\u0135","\u0458","\u0408","\u10ef","\u062c","\uff4a"],k:["\u0137","\u0138","\u043a","\u03ba","\u0136","\u0642","\u0643","\u1000","\u10d9","\u10e5","\u06a9","\uff4b"],l:["\u0142","\u013e","\u013a","\u013c","\u0140","\u043b","\u03bb","\u0644","\u101c","\u10da","\uff4c"],m:["\u043c","\u03bc","\u0645","\u1019","\u10db","\uff4d"],n:["\xf1","\u0144","\u0148","\u0146","\u0149","\u014b","\u03bd","\u043d","\u0646","\u1014","\u10dc","\uff4e"],o:["\xf3","\xf2","\u1ecf","\xf5","\u1ecd","\xf4","\u1ed1","\u1ed3","\u1ed5","\u1ed7","\u1ed9","\u01a1","\u1edb","\u1edd","\u1edf","\u1ee1","\u1ee3","\xf8","\u014d","\u0151","\u014f","\u03bf","\u1f40","\u1f41","\u1f42","\u1f43","\u1f44","\u1f45","\u1f78","\u03cc","\u043e","\u0648","\u03b8","\u102d\u102f","\u01d2","\u01ff","\xba","\u10dd","\u0913","\uff4f","\xf6"],p:["\u043f","\u03c0","\u1015","\u10de","\u067e","\uff50"],q:["\u10e7","\uff51"],r:["\u0155","\u0159","\u0157","\u0440","\u03c1","\u0631","\u10e0","\uff52"],s:["\u015b","\u0161","\u015f","\u0441","\u03c3","\u0219","\u03c2","\u0633","\u0635","\u1005","\u017f","\u10e1","\uff53"],t:["\u0165","\u0163","\u0442","\u03c4","\u021b","\u062a","\u0637","\u100b","\u1010","\u0167","\u10d7","\u10e2","\uff54"],u:["\xfa","\xf9","\u1ee7","\u0169","\u1ee5","\u01b0","\u1ee9","\u1eeb","\u1eed","\u1eef","\u1ef1","\xfb","\u016b","\u016f","\u0171","\u016d","\u0173","\xb5","\u0443","\u1009","\u102f","\u1030","\u01d4","\u01d6","\u01d8","\u01da","\u01dc","\u10e3","\u0909","\uff55","\u045e","\xfc"],v:["\u0432","\u10d5","\u03d0","\uff56"],w:["\u0175","\u03c9","\u03ce","\u101d","\u103d","\uff57"],x:["\u03c7","\u03be","\uff58"],y:["\xfd","\u1ef3","\u1ef7","\u1ef9","\u1ef5","\xff","\u0177","\u0439","\u044b","\u03c5","\u03cb","\u03cd","\u03b0","\u064a","\u101a","\uff59"],z:["\u017a","\u017e","\u017c","\u0437","\u03b6","\u0632","\u1007","\u10d6","\uff5a"],aa:["\u0639","\u0906","\u0622"],ae:["\xe6","\u01fd"],ai:["\u0910"],ch:["\u0447","\u10e9","\u10ed","\u0686"],dj:["\u0452","\u0111"],dz:["\u045f","\u10eb"],ei:["\u090d"],gh:["\u063a","\u10e6"],ii:["\u0908"],ij:["\u0133"],kh:["\u0445","\u062e","\u10ee"],lj:["\u0459"],nj:["\u045a"],oe:["\xf6","\u0153","\u0624"],oi:["\u0911"],oii:["\u0912"],ps:["\u03c8"],sh:["\u0448","\u10e8","\u0634"],shch:["\u0449"],ss:["\xdf"],sx:["\u015d"],th:["\xfe","\u03d1","\u062b","\u0630","\u0638"],ts:["\u0446","\u10ea","\u10ec"],ue:["\xfc"],uu:["\u090a"],ya:["\u044f"],yu:["\u044e"],zh:["\u0436","\u10df","\u0698"],"(c)":["\xa9"],A:["\xc1","\xc0","\u1ea2","\xc3","\u1ea0","\u0102","\u1eae","\u1eb0","\u1eb2","\u1eb4","\u1eb6","\xc2","\u1ea4","\u1ea6","\u1ea8","\u1eaa","\u1eac","\xc5","\u0100","\u0104","\u0391","\u0386","\u1f08","\u1f09","\u1f0a","\u1f0b","\u1f0c","\u1f0d","\u1f0e","\u1f0f","\u1f88","\u1f89","\u1f8a","\u1f8b","\u1f8c","\u1f8d","\u1f8e","\u1f8f","\u1fb8","\u1fb9","\u1fba","\u0386","\u1fbc","\u0410","\u01fa","\u01cd","\uff21","\xc4"],B:["\u0411","\u0392","\u092c","\uff22"],C:["\xc7","\u0106","\u010c","\u0108","\u010a","\uff23"],D:["\u010e","\xd0","\u0110","\u0189","\u018a","\u018b","\u1d05","\u1d06","\u0414","\u0394","\uff24"],E:["\xc9","\xc8","\u1eba","\u1ebc","\u1eb8","\xca","\u1ebe","\u1ec0","\u1ec2","\u1ec4","\u1ec6","\xcb","\u0112","\u0118","\u011a","\u0114","\u0116","\u0395","\u0388","\u1f18","\u1f19","\u1f1a","\u1f1b","\u1f1c","\u1f1d","\u0388","\u1fc8","\u0415","\u0401","\u042d","\u0404","\u018f","\uff25"],F:["\u0424","\u03a6","\uff26"],G:["\u011e","\u0120","\u0122","\u0413","\u0490","\u0393","\uff27"],H:["\u0397","\u0389","\u0126","\uff28"],I:["\xcd","\xcc","\u1ec8","\u0128","\u1eca","\xce","\xcf","\u012a","\u012c","\u012e","\u0130","\u0399","\u038a","\u03aa","\u1f38","\u1f39","\u1f3b","\u1f3c","\u1f3d","\u1f3e","\u1f3f","\u1fd8","\u1fd9","\u1fda","\u038a","\u0418","\u0406","\u0407","\u01cf","\u03d2","\uff29"],J:["\uff2a"],K:["\u041a","\u039a","\uff2b"],L:["\u0139","\u0141","\u041b","\u039b","\u013b","\u013d","\u013f","\u0932","\uff2c"],M:["\u041c","\u039c","\uff2d"],N:["\u0143","\xd1","\u0147","\u0145","\u014a","\u041d","\u039d","\uff2e"],O:["\xd3","\xd2","\u1ece","\xd5","\u1ecc","\xd4","\u1ed0","\u1ed2","\u1ed4","\u1ed6","\u1ed8","\u01a0","\u1eda","\u1edc","\u1ede","\u1ee0","\u1ee2","\xd8","\u014c","\u0150","\u014e","\u039f","\u038c","\u1f48","\u1f49","\u1f4a","\u1f4b","\u1f4c","\u1f4d","\u1ff8","\u038c","\u041e","\u0398","\u04e8","\u01d1","\u01fe","\uff2f","\xd6"],P:["\u041f","\u03a0","\uff30"],Q:["\uff31"],R:["\u0158","\u0154","\u0420","\u03a1","\u0156","\uff32"],S:["\u015e","\u015c","\u0218","\u0160","\u015a","\u0421","\u03a3","\uff33"],T:["\u0164","\u0162","\u0166","\u021a","\u0422","\u03a4","\uff34"],U:["\xda","\xd9","\u1ee6","\u0168","\u1ee4","\u01af","\u1ee8","\u1eea","\u1eec","\u1eee","\u1ef0","\xdb","\u016a","\u016e","\u0170","\u016c","\u0172","\u0423","\u01d3","\u01d5","\u01d7","\u01d9","\u01db","\uff35","\u040e","\xdc"],V:["\u0412","\uff36"],W:["\u03a9","\u038f","\u0174","\uff37"],X:["\u03a7","\u039e","\uff38"],Y:["\xdd","\u1ef2","\u1ef6","\u1ef8","\u1ef4","\u0178","\u1fe8","\u1fe9","\u1fea","\u038e","\u042b","\u0419","\u03a5","\u03ab","\u0176","\uff39"],Z:["\u0179","\u017d","\u017b","\u0417","\u0396","\uff3a"],AE:["\xc6","\u01fc"],Ch:["\u0427"],Dj:["\u0402"],Dz:["\u040f"],Gx:["\u011c"],Hx:["\u0124"],Ij:["\u0132"],Jx:["\u0134"],Kh:["\u0425"],Lj:["\u0409"],Nj:["\u040a"],Oe:["\u0152"],Ps:["\u03a8"],Sh:["\u0428"],Shch:["\u0429"],Ss:["\u1e9e"],Th:["\xde"],Ts:["\u0426"],Ya:["\u042f"],Yu:["\u042e"],Zh:["\u0416"],"-":[" "]},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=String(e);return t=(t=t.replace(/^\s+|\s+$/g,"")).toLowerCase(),Object.keys($).forEach((function(e){$[e].forEach((function(a){t=t.replace(new RegExp(a,"g"),e)}))})),t},ee=a(24),te=Object(ee.a)();function ae(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t=new URLSearchParams(e);return Array.from(t.keys()).reduce((function(e,a){return"__proto__"!==a&&(e[a]=t.has(a)?JSON.parse(t.get(a)):null),e}),{})}()[e]}function ne(e){var t=Object(n.useState)(e),a=Object(s.a)(t,2),r=a[0],l=a[1];return Object(n.useEffect)((function(){var t=Object.keys(e),a={};t.forEach((function(e){var t=ae(e);void 0!==t&&(a[e]=t)})),l(Object(c.a)(Object(c.a)({},r),a))}),[]),Object(n.useEffect)((function(){var t=Object.keys(r).map((function(e){return{key:e,value:r[e]}})),a=[],n=t.filter((function(t){var n=t.key,r=t.value,l=ae(n)!==r,o=r===e[n],c=null!==r&&void 0!==r;return!o&&c||a.push(n),l&&!o&&c}));n.length+a.length>=1&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{var a=new URLSearchParams(window.location.search);t.forEach((function(e){return a.delete(e)})),console.log(t),e.forEach((function(e){var t=e.key,n=e.value,r=JSON.stringify(n);console.log("Adding key ".concat(t," with value ").concat(r)),a.set(t,r)}));var n=a.toString();n!==window.location.search&&te.push({search:a.toString(),pathname:te.location.pathname})}catch(r){console.error(r.stack)}}(n,a)}),[JSON.stringify(r)]),[r,l]}var re=function(e){var t=e.match.params.genre,a=Object(n.useState)([]),l=Object(s.a)(a,2),o=l[0],c=l[1],i=Object(n.useState)(""),d=Object(s.a)(i,2),p=d[0],f=d[1],E=Object(u.f)(),_=Object(n.useContext)(Pe),v=L(),h=ne({orderBy:null}),g=Object(s.a)(h,2),b=g[0],N=g[1];Object(n.useEffect)((function(){if(v.data){var e=Object(J.a)(v.data);if(t){var a=e.filter((function(e){return e.genre===t})),n=G(b.orderBy,a);c(n)}else{var r=G(b.orderBy,e);c(r)}}}),[JSON.stringify([v.data,t,b])]);var O=R(),k=U(),j=function(e,t){e.preventDefault(),k.mutate(t)};return v.isLoading?r.a.createElement(D,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,null,r.a.createElement("title",null,t?"".concat(V(t)," poems"):"Poemunity")),r.a.createElement("div",{className:"list__container"},r.a.createElement("div",{className:"list__intro"},t&&r.a.createElement("p",{className:"list__presentation"},"Category: ",t.toUpperCase()),r.a.createElement("div",{className:"list__search"},r.a.createElement("div",{className:"separator"}),r.a.createElement(F.a,{style:{fontSize:40,fill:"#4F5D73"}}),r.a.createElement(Q.a,{label:"Search an author",InputLabelProps:{style:{color:"#4F5D73"}},InputProps:{style:{color:"#4F5D73"}},onChange:function(e){f(X(e.target.value))}})),r.a.createElement("form",{className:"list__sort"},r.a.createElement("label",null,"Order poems by: ",r.a.createElement("select",{type:"submit",id:"sort",name:"sort",onChange:function(e){!function(e){var t=e.id,a=e.value;try{var n=new URLSearchParams(window.location.search),r=JSON.stringify(a);n.set(t,r),te.push({search:n.toString(),pathname:te.location.pathname})}catch(l){console.error(l.stack)}}({id:"orderBy",value:e.target.value}),N({orderBy:e.target.value})}},r.a.createElement("option",{value:"Likes",selected:"Likes"===b.orderBy},"Likes"),r.a.createElement("option",{value:"Date",selected:"Date"===b.orderBy},"Date"),r.a.createElement("option",{value:"Random",selected:"Random"===b.orderBy},"Random"),r.a.createElement("option",{value:"Title",selected:"Title"===b.orderBy},"Title"))))),null===o||void 0===o?void 0:o.map((function(e){return r.a.createElement("main",{key:e.id,className:"poem__detail"},X(e.author).includes(p)&&r.a.createElement("section",{className:"poem__block"},r.a.createElement("section",null,r.a.createElement(m.b,{to:"/detail/".concat(e.id),className:"poem__title"},e.title),r.a.createElement("div",{className:"poem__author-container"},r.a.createElement("img",{className:"poem__picture",src:e.picture}),r.a.createElement("p",{className:"poem__author"},e.author)),r.a.createElement("div",{className:"poem__date"},e.date)),r.a.createElement("section",null,r.a.createElement("div",{className:"poem__content poems__content"},e.poem),r.a.createElement("div",{className:"poems__read-more"},r.a.createElement(m.b,{to:"/detail/".concat(e.id),className:"poems__read-more"},"Read more"))),r.a.createElement("section",{className:"poem__footer"},1===e.likes.length&&r.a.createElement("div",{className:"poem__likes"},e.likes.length," ","Like"),1!==e.likes.length&&r.a.createElement("div",{className:"poem__likes"},e.likes.length," ","Likes"),r.a.createElement("div",{className:"separator"}),_.user&&e.author!==_.username&&e.likes.some((function(e){return e===_.username}))&&r.a.createElement(m.b,{className:"poem__likes-icon",onClick:function(t){return j(t,e.id)}}),_.user&&e.author!==_.username&&!e.likes.some((function(e){return e===_.username}))&&r.a.createElement(m.b,{className:"poem__unlikes-icon",onClick:function(t){return j(t,e.id)}}),_.user&&(e.author===_.username||_.userId===_.adminId)&&r.a.createElement(q.a,{className:"poem__edit-icon",onClick:function(t){return a=e.id,E.push("/profile"),void _.setState({elementToEdit:a});var a}}),_.user&&(e.author===_.username||_.userId===_.adminId)&&r.a.createElement(W.a,{className:"poem__delete-icon",style:{fill:"red"},onClick:function(t){return O.mutate(e.id)}}),r.a.createElement(m.b,{to:"/detail/".concat(e.id),className:"poem__comments-icon"},r.a.createElement(K.a,{style:{fill:"#000"}})))))}))))};var le=function(e){return r.a.createElement("main",{className:"dashboard"},r.a.createElement("div",{className:"dashboard__accordion"},r.a.createElement(h,null)),r.a.createElement("div",{className:"dashboard__list"},r.a.createElement(re,e)),r.a.createElement("div",{className:"dashboard__ranking"},r.a.createElement(B,null)))},oe=a(128),ce=a.n(oe);a(118);function ie(e){var t=Object(I.useQueryClient)();return Object(I.useQuery)(["poems",e],(function(){return w.a.get("/api/poems/".concat(e)).then((function(e){return e.data}))}),{initialData:function(){var a;return null===(a=t.getQueryData("poems"))||void 0===a?void 0:a.find((function(t){return t.id===e}))},initialStale:!0,onError:function(e){console.error(e)}})}var se=function(e){var t=Object(n.useState)({id:"",title:"",picture:"",author:"",date:"",poem:"",likes:[]}),a=Object(s.a)(t,2),l=a[0],o=a[1],c=Object(n.useContext)(Pe),i=ie(e.match.params.poemId);Object(n.useEffect)((function(){i.data&&o(i.data)}),[JSON.stringify(i.data)]);var d=R(),p=U();function f(e,t){e.preventDefault(),p.mutate(t)}var E=Object(u.f)();if(i.isLoading)return r.a.createElement(D,null);var _={url:"http://localhost:3000/detail/".concat(e.match.params.poemId),identifier:"http://localhost:3000/detail/".concat(e.match.params.poemId),title:"Title of Your Article"};return r.a.createElement(r.a.Fragment,null,!l&&r.a.createElement("main",{className:"page-not-found__container"},r.a.createElement("section",{className:"page-not-found__message"},r.a.createElement("h1",{className:"page-not-found__title"},"Error - 404"),r.a.createElement("p",{className:"page-not-found__text"},"Nothing to see here"),r.a.createElement(m.b,{className:"page-not-found__link",to:"/"},"Back to Dashboard"))),l&&l.likes&&r.a.createElement("main",{className:"poem__detail"},r.a.createElement(Z.a,null,r.a.createElement("title",null,"Poem: ".concat(l.title))),r.a.createElement("section",{className:"poem__block"},r.a.createElement("section",null,r.a.createElement("h2",{className:"poem__title"},l.title),r.a.createElement("div",{className:"poem__author-container"},r.a.createElement("img",{className:"poem__picture",src:l.picture}),r.a.createElement("p",{className:"poem__author"},l.author)),r.a.createElement("div",{className:"poem__date"},l.date)),r.a.createElement("section",null,r.a.createElement("div",{className:"poem__content"},l.poem)),r.a.createElement("br",null),r.a.createElement("section",{className:"poem__footer"},1===l.likes.length&&r.a.createElement("div",{className:"poem__likes"},l.likes.length," ","Like"),1!==l.likes.length&&r.a.createElement("div",{className:"poem__likes"},l.likes.length," ","Likes"),r.a.createElement("div",{className:"separator"}),c.user&&l.author!==c.username&&l.likes.some((function(e){return e===c.username}))&&r.a.createElement("div",{className:"poem__likes-icon",onClick:function(e){return f(e,l.id)}}),c.user&&l.author!==c.username&&!l.likes.some((function(e){return e===c.username}))&&r.a.createElement("div",{className:"poem__unlikes-icon",onClick:function(e){return f(e,l.id)}}),c.user&&(l.author===c.username||c.userId===c.adminId)&&r.a.createElement(q.a,{className:"poem__edit-icon",onClick:function(e){return t=l.id,E.push("/profile"),void c.setState({elementToEdit:t});var t}}),c.user&&(l.author===c.username||c.userId===c.adminId)&&r.a.createElement(W.a,{className:"poem__delete-icon",style:{fill:"red"},onClick:function(e){return d.mutate(l.id)}}),r.a.createElement(m.b,{to:"/detail/".concat(l.id),className:"poem__comments-icon"},r.a.createElement(K.a,{style:{fill:"#000"}})))),r.a.createElement("div",{className:"article-container"},r.a.createElement(ce.a.DiscussionEmbed,{shortname:"poemunity",config:_}))))},me=function(){var e=Object(u.f)();return r.a.createElement("button",{className:"header__login",onClick:function(){return e.push("/login")}})},ue=function(){var e=Object(u.f)();return r.a.createElement("button",{className:"header__logout",onClick:function(t){t.preventDefault(),window.localStorage.removeItem("loggedUser"),e.push("/")}})},de=function(e){if(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(a)}};var pe=function(){var e=Object(n.useContext)(Pe),t=Object(u.g)();return Object(n.useEffect)((function(){var t,a,n=window.localStorage.getItem("loggedUser");e.setState({user:JSON.parse(n),userId:null===(t=de(JSON.parse(n)))||void 0===t?void 0:t.id,username:null===(a=de(JSON.parse(n)))||void 0===a?void 0:a.username,config:{headers:{Authorization:"Bearer ".concat(JSON.parse(n))}}})}),[JSON.stringify(t)]),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"header"},r.a.createElement("div",{className:"header__dropdown"},r.a.createElement(h,null)),r.a.createElement("div",{className:"header__logo"},r.a.createElement(m.b,{to:"/",className:"header__text-logo-first"},"P"),r.a.createElement(m.b,{to:"/",className:"header__logo-icon"}),r.a.createElement(m.b,{to:"/",className:"header__text-logo-second"},"emunity")),r.a.createElement("p",{className:"list__presentation"},"Your poem community!"),r.a.createElement("div",{className:"separator"}),e.user?r.a.createElement(m.b,{to:"/profile",className:"header__profile"}):r.a.createElement(r.a.Fragment,null),e.user?r.a.createElement(ue,null):r.a.createElement(me,null)))},fe=a(129),Ee=a.n(fe),_e=a(29),ve=a(263),he=a(267),ge=a(264),be=a(262),Ne=a(266),Oe=(a(201),function(e,t){return e.filter((function(e){return(null===e||void 0===e?void 0:e.author)===t}))});var ke=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(""),i=Object(s.a)(c,2),u=i[0],d=i[1],p=Object(n.useContext)(Pe),f=L();Object(n.useEffect)((function(){if(f.data){var e=Oe(f.data,p.username);o(e)}}),[JSON.stringify([f.data,p.username])]);var E=R();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search__container"},r.a.createElement("div",{className:"separator"}),r.a.createElement("div",{className:"list__intro"},r.a.createElement(F.a,{style:{fontSize:40,fill:"#551A8B"}}),r.a.createElement(Q.a,{label:"Buscar autor",InputLabelProps:{style:{color:"#551A8B"}},InputProps:{style:{color:"#551A8B"}},onChange:function(e){d(e.target.value)}}))),l.map((function(e){var t;return r.a.createElement("main",{key:e.id,className:"poem__detail"},(null===(t=e.author)||void 0===t?void 0:t.includes(u))&&r.a.createElement("section",{className:"poem__block"},r.a.createElement("section",null,r.a.createElement(m.b,{to:"/detail/".concat(e.id),className:"poem__title"},e.title),r.a.createElement("p",{className:"poem__author"},null===e||void 0===e?void 0:e.author),r.a.createElement("div",{className:"poem__date"},e.date)),r.a.createElement("section",null,r.a.createElement("div",{className:"poem__content poems__content"},e.poem),r.a.createElement("div",{className:"poems__read-more"},r.a.createElement(m.b,{to:"/detail/".concat(e.id),className:"poems__read-more"},"Leer m\xe1s"))),r.a.createElement("section",{className:"poem__footer"},1===e.likes.length&&r.a.createElement("div",{className:"poem__likes"},e.likes.length," ","Like"),1!==e.likes.length&&r.a.createElement("div",{className:"poem__likes"},e.likes.length," ","Likes"),r.a.createElement("div",{className:"separator"}),p.user&&(e.author===p.username||p.userId===p.adminId)&&r.a.createElement(q.a,{className:"poem__edit-icon",onClick:function(t){return a=e.id,void p.setState({elementToEdit:a});var a}}),p.user&&e.author===p.username&&r.a.createElement(W.a,{className:"poem__delete-icon",style:{fill:"red"},onClick:function(t){return E.mutate(e.id)}}),r.a.createElement(m.b,{to:"/detail/".concat(e.id),className:"poem__comments-icon"},r.a.createElement(K.a,{style:{fill:"#000"}})))))})))},je=function(e,t){return e.filter((function(e){return e.likes.some((function(e){return e===t}))}))};var ye=function(e){var t=Object(n.useContext)(Pe),a=Object(n.useState)([]),l=Object(s.a)(a,2),o=l[0],c=l[1],i=Object(n.useState)(""),u=Object(s.a)(i,2),d=u[0],p=u[1],f=L();Object(n.useEffect)((function(){if(f.data){var e=je(f.data,t.userId);c(e)}}),[JSON.stringify([f.data,t.username])]);var E=R(),_=U();function v(e,t){e.preventDefault(),_.mutate(t)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search__container"},r.a.createElement("div",{className:"separator"}),r.a.createElement("div",{className:"list__intro"},r.a.createElement(F.a,{style:{fontSize:40,fill:"#551A8B"}}),r.a.createElement(Q.a,{label:"Buscar autor",InputLabelProps:{style:{color:"#551A8B"}},InputProps:{style:{color:"#551A8B"}},onChange:function(e){p(e.target.value)}}))),o.map((function(e){return r.a.createElement("main",{key:e.id,className:"poem__detail"},e.author.includes(d)&&r.a.createElement("section",{className:"poem__block"},r.a.createElement("section",null,r.a.createElement(m.b,{to:"/detail/".concat(e.id),className:"poem__title"},e.title),r.a.createElement("div",{className:"poem__author-container"},r.a.createElement("img",{className:"poem__picture",src:e.picture}),r.a.createElement("p",{className:"poem__author"},e.author)),r.a.createElement("div",{className:"poem__date"},e.date)),r.a.createElement("section",null,r.a.createElement("div",{className:"poem__content poems__content"},e.poem),r.a.createElement("div",{className:"poems__read-more"},r.a.createElement(m.b,{to:"/detail/".concat(e.id),className:"poems__read-more"},"Leer m\xe1s"))),r.a.createElement("section",{className:"poem__footer"},1===e.likes.length&&r.a.createElement("div",{className:"poem__likes"},e.likes.length," ","Like"),1!==e.likes.length&&r.a.createElement("div",{className:"poem__likes"},e.likes.length," ","Likes"),r.a.createElement("div",{className:"separator"}),t.user&&e.author!==t.username&&e.likes.some((function(e){return e===t.username}))&&r.a.createElement(m.b,{className:"poem__likes-icon",onClick:function(t){return v(t,e.id)}}),t.user&&e.author!==t.username&&!e.likes.some((function(e){return e===t.username}))&&r.a.createElement(m.b,{className:"poem__unlikes-icon",onClick:function(t){return v(t,e.id)}}),t.user&&e.author===t.username&&r.a.createElement(W.a,{className:"poem__delete-icon",style:{fill:"red"},onClick:function(t){return E.mutate(e.id)}}),r.a.createElement(m.b,{to:"/detail/".concat(e.id),className:"poem__comments-icon"},r.a.createElement(K.a,{style:{fill:"#000"}})))))})))};function Se(e){var t=e.children,a=e.value,n=e.index,l=Object(i.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n)},l),a===n&&r.a.createElement(Ne.a,{p:3},r.a.createElement(be.a,null,t)))}function Ce(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}Object(g.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,width:500}}}));function we(e){var t=Object(_e.a)(),a=r.a.useState(0),l=Object(s.a)(a,2),o=l[0],c=l[1],i=Object(n.useState)(""),m=Object(s.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)(""),f=Object(s.a)(p,2),E=f[0],_=f[1],h=Object(n.useState)(""),g=Object(s.a)(h,2),b=g[0],N=g[1],O=Object(n.useState)(""),k=Object(s.a)(O,2),j=k[0],y=k[1],S=Object(n.useState)([]),C=Object(s.a)(S,2),L=C[0],x=C[1],P=function(){var e=Object(I.useQueryClient)(),t=Object(n.useContext)(Pe);return Object(I.useMutation)((function(e){console.log(e),w.a.post("/api/poems",e,t.config).then((function(e){return e.data}))}),{onSuccess:function(){e.invalidateQueries("poems")},onError:function(e){console.error(e)}})}(),T=function(){var e=Object(I.useQueryClient)();return Object(I.useMutation)((function(e){var t=e.poem,a=e.poemId;return w.a.patch("/api/poems/".concat(a),t).then((function(e){return e.data}))}),{onSuccess:function(){e.invalidateQueries("poems")},onError:function(e){console.error(e)}})}(),D=Object(n.useContext)(Pe),A=ie(D.elementToEdit);Object(n.useEffect)((function(){var e,t,a,n,r,l;N(D.elementToEdit?null===A||void 0===A||null===(e=A.data)||void 0===e?void 0:e.title:""),d(D.elementToEdit?null===A||void 0===A||null===(t=A.data)||void 0===t?void 0:t.poem:""),_(D.elementToEdit?null===A||void 0===A||null===(a=A.data)||void 0===a?void 0:a.userId:""),x(D.elementToEdit?null===A||void 0===A||null===(n=A.data)||void 0===n||null===(r=n.likes)||void 0===r?void 0:r.toString():[]),y(D.elementToEdit?null===A||void 0===A||null===(l=A.data)||void 0===l?void 0:l.genre:"")}),[JSON.stringify([D.elementToEdit,A.data])]);function B(e,t){t(e)}return r.a.createElement("main",{className:"profile__main"},D.user?r.a.createElement("div",null,r.a.createElement("section",{className:"profile__title"},r.a.createElement("div",null,D.username,"'s Profile")),r.a.createElement("section",{className:"profile__intro"},r.a.createElement("img",{className:"profile__image",alt:D.username}),r.a.createElement("div",{className:"profile__personal-data"},r.a.createElement("div",{className:"profile__insert-poem"},r.a.createElement("p",{className:"profile__insert-poem-title"},"Insert a poem:"),r.a.createElement("br",null),r.a.createElement("form",{className:"profile__insert-poem-form"},r.a.createElement("div",{className:"profile__insert-poem-inputs"},D.userId===D.adminId&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"profile__insert-poem-input"},"Author's Id: ",r.a.createElement("input",{className:"profile__insert-poem-input",name:"author",required:!0,value:E,onChange:function(e){return B(e.target.value,_)}})),r.a.createElement("label",{className:"profile__insert-poem-input"},"Likes",r.a.createElement("input",{className:"profile__insert-poem-input",name:"likes",value:L,onChange:function(e){return B(e.target.value,x)}}))),r.a.createElement("label",{className:"profile__insert-poem-input"},"Title: ",r.a.createElement("input",{className:"profile__insert-poem-input",placeholder:"Title",name:"title",required:!0,value:b,onChange:function(e){return B(e.target.value,N)}})),r.a.createElement("label",{className:"profile__insert-poem-input"},"Category: ",r.a.createElement("select",{className:"profile__insert-poem-input",id:"category",name:"category",required:!0,onChange:function(e){B(e.target.value,y)}},r.a.createElement("option",{value:""},"Select"),null===v||void 0===v?void 0:v.map((function(e){var t;return r.a.createElement("option",{value:e.toLowerCase(),selected:(null===A||void 0===A||null===(t=A.data)||void 0===t?void 0:t.genre)===e.toLowerCase()},e)}))))),r.a.createElement("div",null,r.a.createElement("textarea",{className:"profile__text-area",id:"poem",name:"poem",required:!0,placeholder:"Insert your poem here",value:u,onChange:function(e){return B(e.target.value,d)}})),r.a.createElement("button",{className:"profile__send-poem",type:"submit",onClick:function(e){D.setState({elementToEdit:""})}},"Reset"),r.a.createElement("button",{className:"profile__send-poem",type:"submit",onClick:function(e){e.preventDefault();var t=new Date,a=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();D.elementToEdit?(D.userId===D.adminId?T.mutate({poem:{userId:E,poem:u,title:b,genre:j,likes:0!==L.length?Object(J.a)(null===L||void 0===L?void 0:L.split(",")):[],date:a},poemId:A.data.id}):T.mutate({poem:{poem:u,title:b,genre:j,likes:[],date:a},poemId:A.data.id}),D.setState({elementToEdit:""})):(D.userId===D.adminId?P.mutate({userId:E,poem:u,title:b,genre:j,likes:0!==L.length?Object(J.a)(null===L||void 0===L?void 0:L.split(",")):[],date:a}):P.mutate({poem:u,title:b,genre:j,likes:[],date:a}),d(""),N(""),y(""))}},"Send"))))),r.a.createElement("section",{className:"profile__outro"},r.a.createElement("div",{className:"profile__tabs"},r.a.createElement(ve.a,{position:"static",color:"default"},r.a.createElement(he.a,{value:o,onChange:function(e,t){c(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"full width tabs example"},r.a.createElement(ge.a,Object.assign({label:"My poems"},Ce(0))),r.a.createElement(ge.a,Object.assign({label:"My favourite poems"},Ce(1))))),r.a.createElement(Ee.a,{axis:"rtl"===t.direction?"x-reverse":"x",index:o,onChangeIndex:function(e){c(e)}},r.a.createElement(Se,{className:"profile__myPoems",value:o,index:0,dir:t.direction},r.a.createElement(ke,null)),r.a.createElement(Se,{className:"profile__myPoems",value:o,index:1,dir:t.direction},r.a.createElement(ye,null)))))):null)}a(202);var Ie=function(){Object(u.f)();var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(""),c=Object(s.a)(o,2),i=c[0],d=c[1],p=function(){Object(I.useQueryClient)();var e=Object(u.f)();return Object(I.useMutation)((function(e){return w.a.post("/api/login",e).then((function(e){return e.data}))}),{onSuccess:function(t){window.localStorage.setItem("loggedUser",JSON.stringify(t)),e.push("profile")},onError:function(e){console.log("something went wrong")}})}();return r.a.createElement("form",{className:"login",onSubmit:function(e){e.preventDefault(),p.mutate({username:a,password:i}),l(""),d("")}},r.a.createElement("label",null,'Introduce your login credentials or click "Register" if you don\'t have them'),r.a.createElement("div",{className:"login__username"},r.a.createElement("input",{type:"text",value:a,name:"Username",placeholder:"Username",onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",{className:"login__password"},r.a.createElement("input",{type:"password",value:i,name:"Password",placeholder:"Password",onChange:function(e){return d(e.target.value)}})),r.a.createElement("button",null,"Login"),r.a.createElement(m.c,{to:"/register"},"Register"))};a(203);var Le=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(""),c=Object(s.a)(o,2),i=c[0],d=c[1],p=Object(n.useState)(""),f=Object(s.a)(p,2),E=f[0],_=f[1],v=function(){Object(I.useQueryClient)();var e=Object(u.f)();return Object(I.useMutation)((function(e){return w.a.post("/api/register",e).then((function(e){return e.data}))}),{onSuccess:function(t){e.push("/login")},onError:function(e){console.log("something went wrong")}})}();return r.a.createElement("form",{className:"register",onSubmit:function(e){e.preventDefault(),v.mutate({username:a,email:i,password:E})}},r.a.createElement("label",null,'Introduce your new credentials or click "Login" if you already have them'),r.a.createElement("div",{className:"register__username"},r.a.createElement("input",{type:"text",value:a,name:"Username",placeholder:"Username",onChange:function(e){var t=e.target;return l(t.value)}})),r.a.createElement("div",{className:"register__email"},r.a.createElement("input",{type:"text",value:i,name:"Email",placeholder:"Email",onChange:function(e){var t=e.target;return d(t.value)}})),r.a.createElement("div",{className:"register__password"},r.a.createElement("input",{type:"password",value:E,name:"Password",placeholder:"Password",onChange:function(e){var t=e.target;return _(t.value)}})),r.a.createElement("button",null,"Register"),r.a.createElement(m.c,{to:"/login"},"Login"))};var xe=function(e){return r.a.createElement("main",{className:"page-not-found__container"},r.a.createElement("section",{className:"page-not-found__message"},r.a.createElement("h1",{className:"page-not-found__title"},"Error - 404"),r.a.createElement("p",{className:"page-not-found__text"},"Nothing to see here"),r.a.createElement(m.b,{className:"page-not-found__link",to:"/"},"Back to Dashboard")))},Pe=r.a.createContext();var Te=function(e){var t=Object(n.useState)({elementToEdit:"",user:null,userId:"",username:"",config:{},adminId:"6172f315eb48b69ac1f015dc",setState:function(e){e.setState;var t=Object(i.a)(e,["setState"]),a=Object(c.a)(Object(c.a)({},l),t);o(a)}}),a=Object(s.a)(t,2),l=a[0],o=a[1];return r.a.createElement(Pe.Provider,{value:l},r.a.createElement(m.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(pe,null),r.a.createElement("div",{className:"margin-body"},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",exact:!0,component:le}),r.a.createElement(u.a,{path:"/profile",component:we}),r.a.createElement(u.a,{path:"/login",component:Ie}),r.a.createElement(u.a,{path:"/register",component:Le}),r.a.createElement(u.a,{path:"/:genre",exact:!0,component:le}),r.a.createElement(u.a,{path:"/detail/:poemId",exact:!0,component:se}),r.a.createElement(u.a,{component:xe}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var De=a(130);var Ae=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_AUTH0_DOMAIN:"dev-kpid04y3.eu.auth0.com",REACT_APP_AUTH0_CLIENTID:"A9LJVea7ss5WV8pjbW1505492DGyqosI",REACT_APP_ADMIN:"6172f315eb48b69ac1f015dc"}),Be=(Ae.REACT_APP_AUTH0_DOMAIN,Ae.REACT_APP_AUTH0_CLIENTID,new I.QueryClient);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I.QueryClientProvider,{client:Be},r.a.createElement(Te,null),r.a.createElement(De.ReactQueryDevtools,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},36:function(e,t,a){},59:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){}},[[144,1,2]]]);
//# sourceMappingURL=main.7f106e51.chunk.js.map